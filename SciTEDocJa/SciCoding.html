<?xml version="1.0" encoding="Utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
  <head>
    <meta name="generator" content="SciTE" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link href="translation.css" rel="stylesheet" type="text/css" />
	<title>
      Scintilla と SciTE の望ましいコーディングスタイル
    </title>
	<style>
	.S0 {
		color: #808080;
	}
	.S1 {
		font-family: Comic Sans MS;
		color: #007F00;
		font-size: 9pt;
	}
	.S2 {
		font-family: Comic Sans MS;
		color: #007F00;
		font-size: 9pt;
	}
	.S3 {
		font-family: Comic Sans MS;
		color: #3F703F;
		font-size: 9pt;
	}
	.S4 {
		color: #007F7F;
	}
	.S5 {
		font-weight: bold;
		color: #00007F;
	}
	.S6 {
		color: #7F007F;
	}
	.S7 {
		color: #7F007F;
	}
	.S8 {
		color: #804080;
	}
	.S9 {
		color: #7F7F00;
	}
	.S10 {
		font-weight: bold;
		color: #000000;
	}
	.S12 {
		font-family: Courier New;
		color: #000000;
		background: #E0C0E0;
		font-size: 10pt;
	}
	.S13 {
		font-family: Courier New;
		color: #007F00;
		background: #E0FFE0;
		font-size: 10pt;
	}
	.S14 {
		font-family: Courier New;
		color: #3F7F3F;
		background: #E0F0FF;
		font-size: 10pt;
	}
	.S15 {
		font-family: Comic Sans MS;
		color: #3F703F;
		font-size: 9pt;
	}
	.S0, .S1, .S2, .S3, .S4, .S5, .S6, .S7, .S8, .S9, .S10, .S11, .S12, .S13, .S14, .S15{
		font-family: Verdana;
		font-size: 10pt;
	}
	</style>
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <table bgcolor="#000000" width="100%" cellspacing="0" cellpadding="0" border="0">
      <tr>
        <td>
          <img src="SciTEIco.png" border="3" height="64" width="64" alt="Scintilla icon" />
        </td>
        <td>
          <a href="index.html" style="color:white;text-decoration:none"><font size="5">Scintilla</font></a>
        </td>
      </tr>
    </table>
    <h2><span>コーディングスタイル</span>
    <span class="eng">
       Code Style
    </span></h2>
    <h3><span>はじめに</span>
    <span class="eng">
       Introduction
    </span></h3>
	<p>Scintilla と SciTE のソースコードは私のスタイルに従って書かれています。いくつかの規定は任意のもので、私の好みに基づいたものです。とはいえ、それが誰もが満足するような形ではなかったとしても、全てのコードが同じような形で書かれていることはよいことです。</p>
    <p class="eng">
	The source code of Scintilla and SciTE follow my preferences. 
	Some of these decisions are arbitrary and based on my sense of aesthetics
	but its good to have all the code look the same even if its not exactly how
	everyone would prefer.
	</p>
	<p>この規定に沿わないコードがあっても構いませんが、時間の経過とともに規定に従うように書き換えられるでしょう。Scintilla のコードは SciTE よりも厳しめに規定に従っています。ただし SciTE のなかでも解析器(lexer)は、相対的に独立したモジュールなので例外です。警告に対する修正する以外は、他の人々に保守されている解析器はそのままにしています。この結果プロジェクト全体としてはエラーを起こさずにコンパイルができます。</p>
    <p class="eng">
	Code that does not follow these conventions will be accepted, but will be modified
	as time goes by to fit the conventions. Scintilla code follows the conventions more 
	closely than SciTE except for lexers which are relatively independent modules. 
	Lexers that are maintained by others are left as they are submitted except that
	warnings will be fixed so the whole project can compile cleanly.
	</p>
	<p>'-tapO' 引数を指定した <a href="http://astyle.sourceforge.net/">Astyle</a> 書式準拠プログラムは、Astyle にいくつか瑕疵があるもののおおよそのところで正しく動作します。 scite/scripts/Fixer.py にあるスクリプトは Astyle を C++ ソースファイルに適用し、それらの瑕疵を修正します。</p>
    <p class="eng">
	The <a href="http://astyle.sourceforge.net/">AStyle</a> formatting 
	program with a '-tapO' argument formats code in much the right way although 
	there are a few bugs in AStyle. The scite/scripts/Fixer.py script will run AStyle
	over a C++ source file and fix up some of those bugs.
	</p>
    <h3><span>言語の機能</span>
    <span class="eng">
       Language features
    </span></h3>
	<p>Scintilla と SciTE の目標の一つに、いろいろな環境上の現在利用可能な C++ コンパイラが利用可能で、高い性能と低いリソース消費を保つことがあります。Scintilla は SciTE より厳しい可搬性要求があります。Windows CE や PalmOS のような条件の厳しい環境にも移植されているからです。SciTE はこれよりも多少条件がゆるやかになります。</p>
    <p class="eng">
	Design goals for Scintilla and SciTE include portability to currently available C++ 
	compilers on diverse platforms with high performance and low resource usage.
	Scintilla has stricter portability requirements to SciTE as it may be ported to 
	low capability platforms such as Windows CE or PalmOS but it is less likely
	SciTE will be.
	</p>
	<p>移植性を高めるため、C++ の一部の機能だけを使います。環境によっては例外処理ができません(Windows CE など)。これに伴い標準 C++ ライブラリは使えないことになります。コンパイラによってはテンプレートの挙動が違うため、Scintilla では使えません。ただし、SciTE では単純なテンプレートは使えるようにしています。実行時型情報はメモリを消費するため使えないことにします。名前空間は使いません。</p>
    <p class="eng">
	To achieve portability, only a subset of C++ features are used. Exceptions are 
	not available on some platforms such as Windows CE so exceptions are not used
	and thus the standard C++ library can not be used. 
	Template support differs between compilers so is not used in Scintilla but there
	are some simple uses in SciTE.
	Run-time type information adds to memory use so is turned off. 
	Name spaces are not used.
	</p>
	<p>私の初めての仕事であった FORTRAN プログラムの保守はひどい思い出でしたので goto 文は使いません。共用体は型安全性が崩れる元となるため使いません。</p>
    <p class="eng">
	The goto statement is not used because of bad memories from my first job 
	maintaining FORTRAN programs. The union feature is not used as it can lead to 
	non-type-safe value access.
	</p>
    <h3><span>キャストについて</span>
    <span class="eng">
       Casting
    </span></h3>
	<p>(char *)s のような、C 言語で使われていた方式の古いキャストは使用禁止です。const_cast&lt;char *&gt;(s) というように C++ で新設されたキャストうちの最も厳しい条件のものを使ってください。可能な限り reinterpret_cast よりも static_cast と const_cast を使います。実行時型情報を使用不可にしてコンパイルしますので、dynamic_cast は動作しないでしょう。</p>
    <p class="eng">
	Do not use old C style casts like (char *)s. Instead use the most strict form of C++ 
	cast possible like const_cast&lt;char *&gt;(s). Use static_cast and const_cast 
	where possible rather than reinterpret_cast. Because the code is compiled with 
	run-time type information turned off, dynamic_cast will not work.
	</p>
	<p>新しい形のキャストを使うことで、どのようなよくないことが起きているかの詳細がはっきりし、潜在的には危険なことが行われていることの印として役に立ちます。</p>
    <p class="eng">
	The benefit to using the new style casts is that they explicitly detail what evil is
	occurring and act as signals that something potentially unsafe is being done.
	</p>
	<p>const を丁寧に扱うコードは人間にとってもコンパイラに対しても大きな説明の力を持ちます。ですから const_cast を避けて const 変数を用いてください。</p>
    <p class="eng">
	Code that treats const seriously is easier to reason about both for humans
	and compilers, so use const parameters and avoid const_cast.
	</p>
    <h3><span>警告について</span>
    <span class="eng">
       Warnings
    </span></h3>
	<p>しっかり書かれた可搬性のあるコードであることを保証するために、ほぼ全ての警告機能を有効にしてコンパイルします。この結果、全く問題のないコードに対して警告が出ることがありますが、警告が出ないように修正するほうが一般的には高速化になり、可読性もほとんど落ちません。</p>
	<p>(訳注: 原文の false positives も考慮に入れると「ぱっと見には理不尽だけれども実は意味があって正しい」というようなインテリすぎるコードはやめとけ、という趣旨と思われます。この節に限りませんが、C よりも C++ の理念に近いものと言えるでしょう。）</p>
    <p class="eng">
	To help ensure code is well written and portable, it is compiled with almost all
	warnings turned on. This sometimes results in warnings about code that is 
	completely good (false positives) but changing the code to avoid the warnings 
	is generally fast and has little impact on readability. 
	</p>
	<p>全ての変数は明示的に初期化し、変数の有効範囲は可能な限り小さくしてください。利用する直前に変数を定義しておけばそれより前のコードで誤ってその変数を使うことはなくなります。C++ 標準と現在利用できるコンパイラで同じ動作をする繰り返し構文を用いましょう。</p>
    <p class="eng">
	Initialise all variables and minimise the scope of variables. If a variable is defined
	just before its use then it can't be misused by code before that point.
	Use loop declarations that are compatible with both the C++ standard and currently 
	available compilers. 
	</p>
    <h3><span>メモリ割り当てについて</span>
    <span class="eng">
       Allocation
    </span></h3>
	<p>例外処理は使いませんので、メモリリソースの枯渇が起こりえます。これは検査され制御されるべきですが Scintilla と SciTE の実に大量のコードはこれを行っていません。</p>
    <p class="eng">
	As exceptions are not used, memory exhaustion can occur. 
	This should be checked for and handled but there is quite a lot of Scintilla and
	SciTE code that doesn't yet. 
	Fixed length buffers are often used as these are simple and avoid the need to 
	worry about memory exhaustion but then require that buffer lengths are 
	respected. 
	</p>
	<p>型安全性という理由から、C++ の new と delete 演算子が C の malloc と free より好まれます。</p>
    <p class="eng">
	The C++ new and delete operators are preferred over C's malloc and free
	as new and delete are type safe.
	</p>
    <h3><span>(波)括弧の書き方について</span>
    <span class="eng">
       Bracketing
    </span></h3>
	<p>開き波括弧 '{' は制御構造が始まる行に置かれるべきです。また閉じ波括弧 '}' は開始行と同じ字下げ位置に書かれるべきです。else 節がある場合は '}' と同じ行に置きます。この形を取ることで、他の習慣よりも行数を減らし一画面内にたくさんのコードを表示させることができます。完全な波括弧による制御構造が好まれます。変更が正しく行われ、Scintilla の折りたたみが動作するからです。</p><p>return 文は括弧なしで、つまり関数としてではなくキーワードとして使います。</p>
    <p class="eng">
	Start brackets, '{', should be located on the line of the control structure they
	start and end brackets, '}', should be at the indented start of a line. When there is
	an else clause, this occurs on the same line as the '}'. 
	This format uses less lines than alternatives, allowing more code to be seen on screen.
	Fully bracketed control 
	structures are preferred because this makes it more likely that modifications will 
	be correct and it allows Scintilla's folder to work. No braces on returned 
	expressions as return is a keyword, not a function call.
	</p>
<SPAN class=S0></SPAN><SPAN class=S5>bool</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>fn</SPAN><SPAN class=S10>(</SPAN><SPAN class=S5>int</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>a</SPAN><SPAN class=S10>)</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>{</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S5>if</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>(</SPAN><SPAN class=S11>a</SPAN><SPAN class=S10>)</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>{</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S11>s</SPAN><SPAN class=S10>();</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S11>t</SPAN><SPAN class=S10>();</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S10>}</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S5>else</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>{</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S11>u</SPAN><SPAN class=S10>();</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S10>}</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S5>return</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>!</SPAN><SPAN class=S11>a</SPAN><SPAN class=S10>;</SPAN><SPAN class=S0><BR>
</SPAN><SPAN class=S10>}</SPAN><SPAN class=S0><BR>
</SPAN>
<h3><span>空白について</span>
    <span class="eng">
       Spacing
    </span></h3>
	<p>
	'=' の両側と比較演算子の両側に置きます。'=' を並べることはしません(訳注:代入文の連続などで縦に並べる場合の話か)。<br />
	呼び出しに使う '(' の前後には置きません。',' の後には置きます。<br />
	短いトークンどうしの間には置きませんが、長いトークンがある場合は置くこともあります。<br />
	'{' の前には置きます。':' の前には置きません。<br />
	ポインタの '*' の後には置きません。'[' と ']' の後には置きません。<br />
	予約語と '(' の間には置きます。
	</p>
    <p class="eng">
	Spaces on both sides of '=' and comparison operators and no attempt to line up '='. 
	No space before or after '(', when used in calls, but a space after every ','.
	No spaces between tokens in short expressions but may be present in 
	longer expressions. Space before '{'. No space before ';'. 
	No space after '*' when used to mean pointer and no space after '[' or ']'.
	One space between keywords and '('.
	</p>
<SPAN class=S0></SPAN><SPAN class=S5>void</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>StoreConditionally</SPAN><SPAN class=S10>(</SPAN><SPAN class=S5>int</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>c</SPAN><SPAN class=S10>,</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S5>const</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S5>char</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>*</SPAN><SPAN class=S11>s</SPAN><SPAN class=S10>)</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>{</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S5>if</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>(</SPAN><SPAN class=S11>c</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>&amp;&amp;</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>(</SPAN><SPAN class=S11>baseSegment</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>==</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>trustSegment</SPAN><SPAN class=S10>[</SPAN><SPAN class=S6>"html"</SPAN><SPAN class=S10>]))</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>{</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S11>baseSegment</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>=</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>s</SPAN><SPAN class=S10>+</SPAN><SPAN class=S4>1</SPAN><SPAN class=S10>;</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S11>Store</SPAN><SPAN class=S10>(</SPAN><SPAN class=S11>s</SPAN><SPAN class=S10>,</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>baseSegment</SPAN><SPAN class=S10>,</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S6>"html"</SPAN><SPAN class=S10>);</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S10>}</SPAN><SPAN class=S0><BR>
</SPAN><SPAN class=S10>}</SPAN>
    <h3><span>名前について</span>
    <span class="eng">
       Names
    </span></h3>
	<p>識別子は大文字小文字を混ぜて使い、下線文字は使いません。クラス・関数・メソッドの名前は大文字で始まり、その後は単語の先頭毎に大文字を使います。変数は小文字で始まり、それ以後はやはり単語の先頭毎に大文字にします。反復カウンタや同種の変数は 'i' といった単純な名前を使うことができます。メソッド呼び出しとそうでない広域関数呼び出しを区別できるようにすべきです。'::' から始まる表現で広域スコープ関数であることを示してください。</p>
    <p class="eng">
	Identifiers use mixed case and no underscores.
	Class, function and method names start with an uppercase letter and use
	further upper case letters to distinguish words. Variables start with a lower 
	case letter and use upper case letters to distinguish words. 
	Loop counters and similar variables can have simple names like 'i'.
	Function calls should be differentiated from method calls with an initial '::' 
	global scope modifier.
	</p>
<SPAN class=S0></SPAN><SPAN class=S5>class</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>StorageZone</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>{</SPAN><SPAN class=S0><BR>
</SPAN><SPAN class=S5>public</SPAN><SPAN class=S10>:</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S5>void</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>Store</SPAN><SPAN class=S10>(</SPAN><SPAN class=S5>const</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S5>char</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>*</SPAN><SPAN class=S11>s</SPAN><SPAN class=S10>)</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>{</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S11>Media</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>*</SPAN><SPAN class=S11>mediaStore</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>=</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>::</SPAN><SPAN class=S11>GetBaseMedia</SPAN><SPAN class=S10>(</SPAN><SPAN class=S11>zoneDefault</SPAN><SPAN class=S10>);</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S5>for</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>(</SPAN><SPAN class=S5>int</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>i</SPAN><SPAN class=S10>=</SPAN><SPAN class=S11>mediaStore</SPAN><SPAN class=S10>-&gt;</SPAN><SPAN class=S11>cursor</SPAN><SPAN class=S10>;</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>mediaStore</SPAN><SPAN class=S10>[</SPAN><SPAN class=S11>i</SPAN><SPAN class=S10>],</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S11>i</SPAN><SPAN class=S10>++)</SPAN><SPAN class=S0>&nbsp;</SPAN><SPAN class=S10>{</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S11>mediaStore</SPAN><SPAN class=S10>-&gt;</SPAN><SPAN class=S11>Persist</SPAN><SPAN class=S10>(</SPAN><SPAN class=S11>s</SPAN><SPAN class=S10>[</SPAN><SPAN class=S11>i</SPAN><SPAN class=S10>]);</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S10>}</SPAN><SPAN class=S0><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN class=S10>}</SPAN><SPAN class=S0><BR>
</SPAN><SPAN class=S10>};</SPAN>
  </body>
</html>
