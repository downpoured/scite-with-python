<?xml version="1.0" encoding="Utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="jp" lang="jp">
  <head>
    <link href="translation.css" rel="stylesheet" type="text/css" />
    <meta name="generator" content="HTML Tidy, see www.w3.org" />
    <meta name="generator" content="SciTE" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>
      SciTE 用解析器
    </title>
  </head>
  <body bgcolor="#FFFFFF" text="#000000">
    <table bgcolor="#000000" width="100%" cellspacing="0" cellpadding="0" border="0">
      <tr>
        <td>
          <img src="SciTEIco.png" border="3" height="64" width="64" alt="Scintilla icon" />
        </td>
        <td>
          <a href="index.html" style="color:white;text-decoration:none"><font size="5">
	  <span>Scintilla と SciTE に解析器を加える</span><span class="eng">Add a lexer to Scintilla and SciTE</span></font></a>
        </td>
      </tr>
    </table>
    <h2><span>解析器の追加</span><span class="eng">
       Lexer addition.</span>
    </h2>
     <p>Scintilla と SciTE の双方に新しい解析器を加える手順の道程は短くありません。Apache の CONF ファイル解析器を SciTE に追加する方法についての私の回答をここで紹介します。解析器のコードを核に当たって(step 4 と 5)、情報がさらに Scintilla の解説書にあります。</p><p class="eng">The process of adding a new lexer to both Scintilla and SciTE
is fairly long. Here is my response when asked how to add a lexer for
Apache CONF files to SciTE. There is more information on writing the
lexer code (steps 4 and 5, here) in the documentation for Scintilla.</p>
<p>設定の手順が煩わしくないように、六つ全ての makefile を使わなくてもいいようになっています。解析器を寄贈してもらえる場合は、私が後ほど修正・合成を行います。</p><p class="eng">
Don't bother about steps which are for configurations you don't
use all 6 makefiles - I'll patch them up later if you want to
contribute the lexer.</p>
    <ol>
<li><span>scintilla/include/Scintilla.iface に解析器識別番号を加えてください。<br />val SCLEX_CONF=17</span><div class="eng">
In scintilla/include/Scintilla.iface, add a lexer ID value:<br />
val SCLEX_CONF=17
</div></li>
<li><span>それから解析分類識別番号を加えてください。<br />
val SCE_CONF_DEFAULT=0<br />
val SCE_CONF_COMMENT=1</span><div class="eng">
And any lexical class IDs:<br />
val SCE_CONF_DEFAULT=0<br />
val SCE_CONF_COMMENT=1
</div></li>
<li><span>scintilla/include ディレクトリにある HFacer.py を実行し、SciLexer.h を再作成してください。Python スクリプトを実行しないで済ませる場合は これらの値を #define で SciLexer.h に定義してください。この場合は私が Scintilla.iface に追加します。</span><div class="eng">
In the scintilla/include directory run HFacer.py to regenerate the
SciLexer.h file. Alternatively (if you don't want to run a Python script)
just add these values to SciLexer.h as #defines and I'll put them in
Scintilla.iface.
</div></li>
<li><span>scintilla/src/LexOthers.cxx の中に ColouriseConfDoc 関数を書いてください。ColouriseLatexDoc のような他の関数のひとつと似たものを書きます。<br />
static void ColouriseConfDoc (unsigned int startPos, int length, int
initStyle, WordList *[], Accessor &amp;styler) {</span><div class="eng">
In the scintilla/src/LexOthers.cxx write a ColouriseConfDoc function
similar to one of the other functions such as ColouriseLatexDoc.<br />
static void ColouriseConfDoc (unsigned int startPos, int length, int
initStyle, WordList *[], Accessor &amp;styler) {
</div></li>
<li><span>ファイルの終わりに解析器識別番号と名前を関数に結びつけてください。<br />
LexerModule lmConf(SCLEX_CONF, ColouriseConfDoc, "conf");</span><div class="eng">
At the end of the file associate the lexer ID and name with the function:<br />
LexerModule lmConf(SCLEX_CONF, ColouriseConfDoc, "conf");
</div></li>
<li><span>複雑な解析器の場合は、独自のファイルに分けた方がいいでしょう。既存のファイルの一つを複製し、LexOthers が現在参照している make ファイルに新しいファイルを追加します。具体的には scintilla/win32/makefile, scintilla/win32/scintilla.mak,
scintilla/gtk/makefile, scite/win32/makefile, scite/win32/scite.mak です。</span><div class="eng">
If this is a complex lexer then it may be better off in its own file, in
which case clone one of the current files and then add the file to all of
the make files where LexOthers is currently referenced -
scintilla/win32/makefile, scintilla/win32/scintilla.mak,
scintilla/gtk/makefile, scite/win32/makefile, and scite/win32/scite.mak.
</div></li>
<li><span>scite/src/others.properties に解析器と関係するファイル拡張子の項目を追加してください。<br />
lexer.*.conf=conf<br />LexOthers に追加するのではなく新しい解析器ファイルを作っている場合は、scite/src/others.properties を複製して新しい属性ファイルを作るべきです。このファイルには次のような変更を行います。</span><div class="eng">
To the scite/src/others.properties add an entry to associate the file
extension with the lexer:<br />
lexer.*.conf=conf<br />
   If a new lexer file was created instead of adding to LexOthers, then a
new properties file should be created by cloning scite/src/others.properties
and modifying that file in the following steps.
</div></li>
<li><span>書式を用意します。<br /># 基本状態<br />
style.conf.0=fore:#FF0000,bold<br />
# 注釈<br />
style.conf.1=fore:#007F7F,$(font.comment)<br />
</span><div class="eng">
Set up the styles:<br />
# Default<br />
style.conf.0=fore:#FF0000,bold<br />
# Comment<br />
style.conf.1=fore:#007F7F,$(font.comment)<br />
</div></li>
<li><span>Windows では scite/src/others.properties に conf ファイル用のフィルタを追加します。この機能は将来 GTK+ でも動作させる予定です。<br />filter.conf=Configuration (.conf)|*.conf|</span><div class="eng">
If on Windows (someday this may work on GTK+ too), a filter should be
added for conf files in scite/src/others.properties:
filter.conf=Configuration (.conf)|*.conf|
</div></li>
<li><span>scite/src/SciTEGlobal.properties に open.filter 定義用の $(filter.conf) を追加してください。</span><div class="eng">
In scite/src/SciTEGlobal.properties add $(filter.conf) to the definition
of open.filter.
</div></li>
<li><span>menu.language 属性に項目を追加して SciTE の文書の種類メニューにこの文書種を増やしてください。文書種の名前とその文書に一番よく用いられる拡張子を指定します。</span><div class="eng">
To add this language to the Language menu of SciTE, add an entry to the menu.language
property including the name of the language and the file extension used most commonly
for it.
</div></li>
<li><span>Scintilla と SciTE をビルドします。</span><div class="eng">
Build both Scintilla and SciTE.
</div></li>
<li><span>共有財産にしてお楽しみください。</span><div class="eng">
Share and enjoy
</div></li>
</ol>
<p>解析器を作るにあたり、より広範囲な情報は <a href ="http://www.scintilla.org/ScintillaDoc.html#BuildingScintilla">
Scintilla 解説書内の指示</a>を参照ください。</p><p class="eng">
For more extensive information on building lexers, see the
<a href ="http://www.scintilla.org/ScintillaDoc.html#BuildingScintilla">
instructions in the Scintilla documentation</a>.
</p>
  </body>
</html>

